#!/usr/bin/env bash
# Note: This is not directly executable.
#       This is for VIM syntax highlighting.
if [ $TRAVIS_BUILD_DIR ]
then
  cd $TRAVIS_BUILD_DIR
fi

describe "abrute decrypts"
  it "1) prep encrypted file"
    bin/aescrypt -e -p 4321 test/data/example.file
    assert file_present test/data/example.file.aes
  end

  it "2) remove original"
    rm test/data/example.file
    assert file_absent test/data/example.file
  end

  it "3) decrypts file"
    target/debug/abrute 4 1234 test/data/example.file.aes 1>/dev/null
    assert file_present test/data/example.file
  end

  it "4) remove encrypted"
    rm test/data/example.file.aes
    assert file_absent test/data/example.file.aes
  end
end
